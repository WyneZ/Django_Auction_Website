<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>signUp</title>
    <link rel="stylesheet" type="text/css" href="{% static 'styles/singIn.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'styles/bs/css/bootstrap.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

    {% if page == 'login' %}
        <body>
            <form method="POST" class="container shadow p-3 bg-body-tertiary rounded position-absolute top-50 start-50 translate-middle" id="form" style = "width:30rem;">
                {% csrf_token %}
                <h1 class="text-center pt-5 mb-5">Sign In</h1>

                <div class="container text-center">

                    <div class="input-field text-center">
                      <input type="text" name="login_email"  placeholder="name@gmail.com">
                      <i class="email-icon fa-regular fa-envelope"></i>
                    </div>

                    <div class="input-field text-center">
                      <input type="password" name="login_password"   placeholder="Enter your password">
                      <span class="see-icon" onclick="showhide()">
                          <i class=" fa-regular fa-eye-slash " id="hide"></i>
                          <i class=" fa-regular fa-eye" style="color: rgb(0, 0, 0);" id="show" ></i>
                      </span>
                    </div>
                    <span id="error" style="font-size:14px;color: rgb(146, 136, 136);">*contain letter,number& special characher*</span>

                    <div class=" text-center mt-5">
                        <button class="btn btn-dark"  type="submit">Sing In</button>
                    </div>
                  </div>
                  <div class="mt-5">
                      <a  href="{% url 'register' %}">create new account</a>
                  </div>
           </form>
            <!-- Script -->
             <script>

              const email = document.querySelector("#login_email");
              const emailIcon = document.querySelector(".email-icon");
              var password = document.getElementById('login_password');
              let hide = document.getElementById("hide");
              let show = document.getElementById("show");
              let error = document.getElementById("error");

              email.addEventListener("keyup", () =>{
                let pattern = /^[a-zA-Z0-9._%+-]+(@gmail.com){1}$/;
                if(email.value === ""){
                  emailIcon.classList.replace("fa-circle-check", "fa-envelope");
                  return emailIcon.style.color = "#b4b4b4";

                }
                if(email.value.match(pattern)){
                  emailIcon.classList.replace("fa-envelope", "fa-circle-check");
                  return emailIcon.style.color = "#4bb543";

                }
                emailIcon.classList.replace("fa-circle-check", "fa-envelope");
                emailIcon.style.color = "#de0611";
              })

              function showhide(){
                console.log("hide");

                if( password.type === "password"){
                  password.type = "text" ;
                  hide.style.display = "none";
                  show.style.display = "block";


                }else{

                  password.type = 'password';
                  hide.style.display = "block";
                  show.style.display = "none";
                }

              }

              password.addEventListener("keyup", () =>{
                var pass = password.value;
                var regularExpression  =  /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,15}$/;

                if(pass === ""){
                  return error.style.color = "rgb(146, 136, 136)";
                }

                if(!regularExpression.test(pass)) {
                return error.style.color = "rgb(230, 52, 52)";;

                }
                  error.style.color = "rgb(55, 128, 7)";

                })

            </script>

            <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>

        </body>

    {% else %}
        <body>
            <div class="container shadow p-3 mb-5  rounded position-absolute top-50 start-50 translate-middle" style = "width:50rem;">
                <h1 class="text-center pt-5">Sign Up</h1>
                <form method="POST" class="row p-5">
                    {% csrf_token %}
                    <!-- *Name -->
                    <div class="col-md-6">
                      <label for="validationServer01" class="form-label">Name</label>
                      <div class="singup_inputfield">
                        <input type="text" class="bg-body-" id="name" name="name" placeholder="Enter your name"required>
                      </div>
                    </div>

                    <!-- *Email -->
                    <div class="col-md-6">
                      <label for="validationServerUsername" class="form-label">Email</label>
                      <div class="singup_inputfield">
                          <input type="email" class="" id="email" name="email" placeholder="Enter your email" required>
                          <i class="icon fa-regular fa-circle-check"></i>
                        </div>
                    </div>

                    <!-- *NRC -->
                    <div class="col-md-6">
                      <label for="validationServer08" class="form-label" >NRC.No</label>
                      <div class="singup_inputfield row row-cols-4">
                        <div class="col">
                          <select name="front" class="code_select text-center p-0 me-1 w-100">
                            <option value="၁">၁</option>
                            <option value="၂">၂</option>
                            <option value="၃">၃</option>
                            <option value="၄">၄</option>
                            <option value="၅">၅</option>
                            <option value="၆">၆</option>
                            <option value="၇">၇</option>
                            <option value="၈">၈</option>
                            <option value="၉">၉</option>
                            <option value="၁၀">၁၀</option>
                            <option value="၁၁">၁၁</option>
                            <option value="၁၂">၁၂</option>
                            <option value="၁၃">၁၃</option>
                            <option value="၁၄">၁၄</option>
                          </select>

                        </div>
                          <!-- -------------- -->
                        <div class="col p-0">
                          <input type="text" id="nrc_code" name="middle_1" maxlength="3" class="px-2 w-100">
                        </div>
                        <!-- --------------- -->
                        <div class="col">
                          <select name="middle_2" class="select p-0 me-1">
                            <option value="(နိုင်)">(နိုင်)</option>
                            <option value="(ဧည့်)">(ဧည့်)</option>
                            <option value="(ပြု)">(ပြု)</option>
                          </select>
                        </div>
                        <!-- ----------------- -->
                        <div class="col p-0">
                          <input type="text" name="back" class="px-2 w-100 " onkeyup="numberonly(this)" maxlength="6" >
                        </div>
                      </div>
                    </div>

                    <!-- *Region -->
                    <div class="col-md-6">
                      <label for="validationServer05" class="form-label">State/Region</label>
                      <div class="singup_inputfield">
                        <select name="state" required>
                          <option>Choose...</option>
                          <option value="Kachin State">Kachin State</option>
                          <option value="Kayah State">Kayah State</option>
                          <option value="Kayin State">Kayin State</option>
                          <option value="Chin State">Chin State</option>
                          <option value="Shan State">Shan State</option>
                          <option value="Mon State">Mon State</option>
                          <option value="Rakhine State">Rakhine State</option>
                          <option value="Yangon Region">Yangon Region</option>
                          <option value="Mandalay Region">Mandalay Region</option>
                          <option value="Ayeyarwady Region">Ayeyarwady Region</option>
                          <option value="Bago Region">Bago Region</option>
                          <option value="Magwe Region">Magwe Region</option>
                          <option value="Sagaing Region">Sagaing Region</option>
                          <option value="Mandalay Region">Mandalay Region</option>
                        </select>
                      </div>
                    </div>

                    <!-- *City -->
                    <div class="col-md-6">
                      <label for="validationServer04" class="form-label">City</label>
                      <div class="singup_inputfield">
                        <input type="text" class="" id="city" name="city" placeholder="Enter your city" required>
                      </div>
                    </div>
                    <!-- *PH.NO -->
                    <div class="col-md-6 ">
                      <label for="validationServer08" class="form-label">Ph.No</label>
                      <div class="singup_inputfield input-group flex-nowrap">
                        <span class=" input-group-text bg-body-secondary" id="addon-wrapping">+959</span>
                        <input type="text"  id="phNo" name="phNo"  maxlength="9">
                        <i class="icon fa-regular fa-circle-check"></i>
                      </div>
                    </div>

                    <!-- *Address -->
                    <div class="col-md-12 me-5">
                      <label for="validationServer03" class="form-label">Address(.No/Street/Quarters/Township)</label>
                      <div class="singup_inputfield">
                        <input type="text" class="" id="address" name="address" aria-describedby="validationServer03Feedback" placeholder=".No/Street/Quarters/Township" required>
                      </div>
                    </div>

                    <!-- *Password -->
                    <div class="col-md-6">
                      <label for="validationServer07" >Password</label>
                      <div class="singup_inputfield">
                        <input type="password" id="password" name="password" required>
                        <span id="error" style="font-size:14px;color: rgb(146, 136, 136);">*contain letter,number& special characher*</span>
                      </div>
                    </div>

                    <!-- *Comfirm_Password -->
                    <div class="col-md-6">
                      <label for="validationServer08">Comfirm Password</label>
                      <div class="singup_inputfield">
                        <input type = "password" id="com_pass" required>
                        <i class="icon fa-regular fa-circle-check"></i>
                      </div>
                    </div>

                    <!-- *Button -->
                    <div class="col text-center mt-5">
                      <button class="btn btn-dark px-5" id="btn_reg" type="submit">Submit</button>
                    </div>

                    <div>
                      <a  href="{% url 'login' %}">Sing In</a>
                  </div>
                  </form>
            </div>
            <script>
              const name = document.querySelector("#name");
              const email = document.querySelector("#email");
              const address = document.querySelector("#address");
              const city = document.querySelector("#city");
              const password = document.querySelector("#password");
              const com_pass = document.querySelector("#com_pass");
              const icon = document.querySelectorAll(".icon");

              let nrc_code = document.getElementById("nrc_code");


              console.log(icon);

                  email.addEventListener("keyup", () =>{
                    let pattern = /^[a-zA-Z0-9._%+-]+(@gmail.com){1}$/;
                    if(email.value === ""){
                      return icon[0].style.color = "#b4b4b4";
                    }

                    if(email.value.match(pattern)){
                       return icon[0].style.color = "#4bb543";
                    }

                    icon[0].style.color = "#de0611";
                  })
                  // ################# //

                  // #######//
                  let phNo = document.getElementById("phNo");
                  let nrcNo = document.getElementById("nrcNo");

                  phNo.addEventListener("keyup", () =>{

                    var regex = /[^0-9]/;

                    phNo.value = phNo.value.replace(regex,"");

                    if(phNo.value === ""){
                      return icon[1].style.color = "#b4b4b4"; //normal
                    }

                    if(phNo.value.length < 10 && phNo.value.length > 5 ){
                       return icon[1].style.color = "#4bb543";  //green
                    }

                    icon[1].style.color = "#de0611"; //red
                  })

                  function numberonly(nrcNo){
                    var regex = /[^0-9]/;
                    nrcNo.value = nrcNo.value.replace(regex,"");
                  }
                  // ####### //
                  password.addEventListener("keyup", () =>{
                    var pass = password.value;
                    var regularExpression  =  /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,15}$/;

                    if(pass === ""){
                      return error.style.color = "rgb(146, 136, 136)";
                    }

                    if(!regularExpression.test(pass)) {
                    return error.style.color = "rgb(230, 52, 52)";;

                    }
                      error.style.color = "rgb(55, 128, 7)";

                  })
                  com_pass.addEventListener("keyup", () =>{


                    if(com_pass.value === ""){
                      return icon[2].style.color = "#b4b4b4"; //normal
                    }

                    if( password.value === com_pass.value){
                       return icon[2].style.color = "#4bb543";  //green
                    }

                    icon[2].style.color = "#de0611";

                  })

                nrc_code.addEventListener("keyup", () =>{
                    var regex = /[^က-အ]/;
                    nrc_code.value = nrc_code.value.replace(regex,"");
                  });

                function numberonly(nrcNo){
                    var regex = /[^၀-၉]/;
                    nrcNo.value = nrcNo.value.replace(regex,"");
                  }



            </script>
        </body>
    {% endif %}

</html>